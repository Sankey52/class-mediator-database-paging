<?xml version="1.0" encoding="UTF-8"?>
<sequence xmlns="http://ws.apache.org/ns/synapse" name="dblookupsequence">
   <log>
      <property name="STATUS" value="inside dblookup"/>
   </log>
   <enrich>
      <source type="property" clone="true" property="original_payload"/>
      <target type="envelope"/>
   </enrich>
   <log level="full"/>
   <payloadFactory media-type="xml">
      <format>
         <dss:select_range xmlns:dss="dss.test">
            <dss:start>$1</dss:start>
            <dss:limit>$2</dss:limit>
         </dss:select_range>
      </format>
      <args>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              evaluator="xml"
              expression="$ctx:start"/>
         <arg xmlns:ns="http://org.apache.synapse/xsd"
              evaluator="xml"
              expression="$ctx:limit"/>
      </args>
   </payloadFactory>
   <log level="full">
      <property name="STATUS" value="payload before calling"/>
   </log>
   <call>
      <endpoint>
         <address uri="http://localhost:8280/services/sampleDS"/>
      </endpoint>
   </call>
   <log level="full">
      <property name="STATUS" value="response from DS"/>
   </log>
   <drop/>
</sequence>
